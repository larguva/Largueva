<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Disiplin Aplikasi ‚Äî Responsif</title>
  <style>
    :root{
      /* font responsif: minimal 14px, ideal berdasarkan vw, maksimal 20px */
      font-size: clamp(14px, 1.9vw, 18px);
      --primary: #4a90e2;
      --card-radius: 12px;
      --gap: 12px;
    }

    *{box-sizing: border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#f7f7f7,#ffffff);
      color:#111;
      padding:16px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:920px; /* tidak terlalu lebar di desktop */
      display:flex;
      flex-direction:column;
      gap:var(--gap);
      padding-bottom:24px;
    }

    header{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    header h1{
      font-size: clamp(1.2rem, 2.6vw, 1.6rem);
      margin:0;
    }

    .controls{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    button{
      appearance:none;
      border:0;
      background:var(--primary);
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      min-height:44px;
    }
    button.secondary{
      background:#6aa6f0;
    }

    .card{
      background:#fff;
      border-radius:var(--card-radius);
      padding:14px;
      box-shadow:0 6px 18px rgba(20,30,50,0.06);
      display:flex;
      gap:16px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .left {
      flex:1 1 320px; /* grow, shrink, basis */
      min-width:0; /* penting agar anak flex bisa mengecil */
      display:flex;
      gap:12px;
      align-items:center;
    }

    .app-icon{
      font-size: clamp(34px, 6vw, 64px);
      line-height:1;
      width:72px;
      height:72px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      background:linear-gradient(180deg,#f0f8ff,#e6f0ff);
      flex-shrink:0;
    }

    .meta {
      flex:1 1 auto;
      min-width:0;
    }

    .meta h3{
      margin:0 0 6px 0;
      font-size:1.05rem;
      word-break:break-word;
    }

    .sisa-waktu{
      font-size: clamp(1.1rem, 3.2vw, 1.6rem);
      font-weight:800;
      color:#b90000; /* merah tegas */
    }

    .inputs{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:8px;
    }

    .inputs label{
      font-size:0.9rem;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }

    input[type="number"]{
      width:72px;
      max-width:30vw;
      padding:8px;
      border-radius:8px;
      border:1px solid #ddd;
      text-align:center;
      font-size:1rem;
      background:#fbfbff;
    }

    /* area kanan - actions & log */
    .right {
      flex: 0 0 300px;
      min-width:220px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .log {
      background:#fff;
      border-radius:10px;
      padding:10px;
      box-shadow:0 4px 12px rgba(10,20,30,0.04);
      max-height:220px;
      overflow:auto;
      font-size:0.94rem;
    }

    .log ul{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px;}
    .log li{
      padding:8px;
      border-radius:8px;
      background:linear-gradient(180deg,#fff,#fbfbfb);
      border:1px solid #f0f0f0;
      word-break:break-word;
    }

    /* responsive tweaks for very small screens */
    @media (max-width:520px){
      .right{ flex-basis:100%; order:3; }
      .left{ flex-basis:100%; order:1; }
      header{ flex-direction:column; align-items:flex-start; gap:10px; }
      .sisa-waktu{ text-align:left; }
      .controls{ width:100%; justify-content:flex-start; }
      button{ min-height:40px; padding:8px 10px; }
    }

    /* ensure no element is hidden on zoom: give body some bottom padding */
    @media (prefers-reduced-motion: no-preference){
      /* no animations used, but keep here for future */
    }

    footer{
      text-align:center;
      margin-top:6px;
      color:#666;
      font-size:0.88rem;
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <h1>Disiplin Waktu Aplikasi</h1>
      <div class="controls" aria-hidden="false">
        <button onclick="pickApp(-25)">5 Point (-25m)</button>
        <button onclick="pickApp(-15)">3 Point (-15m)</button>
        <button onclick="pickApp(-10)">1 Point (-10m)</button>
      </div>
    </header>

    <section class="card" id="appCard" aria-live="polite" style="display:none;">
      <div class="left">
        <div class="app-icon" id="appIcon">üì±</div>
        <div class="meta">
          <h3 id="pickedApp">‚Äî</h3>
          <div class="sisa-waktu" id="result">Sisa waktu: -</div>

          <div class="inputs">
            <label>
              Timer awal:
              <input type="number" id="timerJam" min="0" placeholder="j">
              <span>j</span>
              <input type="number" id="timerMenit" min="0" max="59" placeholder="m">
              <span>m</span>
            </label>

            <label>
              Sudah dipakai:
              <input type="number" id="sudahPakai" min="0" placeholder="m">
              <span>m</span>
            </label>
          </div>
        </div>
      </div>

      <div class="right">
        <div class="actions" role="group" aria-label="Tindakan">
          <button id="addLogBtn" class="secondary">Tambah ke Log</button>
          <button id="resetBtn">Reset Input</button>
        </div>

        <div class="log" aria-live="polite">
          <h4 style="margin:0 0 8px 0;font-size:0.95rem;">Log Aktivitas</h4>
          <ul id="logList"></ul>
        </div>
      </div>
    </section>

    <footer>
      Tip: di HP gunakan pinch-to-zoom atau ubah orientasi layar ‚Äî layout akan menyesuaikan agar tidak menutupi elemen.
    </footer>
  </div>

  <script>
    const apps = [
      {name:"Brave", icon:"ü¶Å"},
      {name:"Facebook", icon:"üìò"},
      {name:"Instagram", icon:"üì∏"},
      {name:"TikTok", icon:"üéµ"},
      {name:"Dragon Nest", icon:"üêâ"},
      {name:"Mobile Legend", icon:"‚öîÔ∏è"}
    ];

    let currentApp = null;
    let currentPunishment = 0;

    function pickApp(punishment){
      const randomApp = apps[Math.floor(Math.random()*apps.length)];
      currentApp = randomApp.name;
      currentPunishment = punishment;

      document.getElementById('appCard').style.display = 'flex';
      document.getElementById('appIcon').textContent = randomApp.icon;
      document.getElementById('pickedApp').innerText = `${currentApp} | Hukuman: -${Math.abs(punishment)}m`;

      // kosongkan input placeholders (tidak menampilkan 0)
      document.getElementById('timerJam').value = '';
      document.getElementById('timerMenit').value = '';
      document.getElementById('sudahPakai').value = '';

      calculate(); // update sisa (berdasarkan 0)
    }

    function calculate(){
      if(!currentApp) return;

      let timerJam = parseInt(document.getElementById('timerJam').value);
      let timerMenit = parseInt(document.getElementById('timerMenit').value);
      let sudahPakai = parseInt(document.getElementById('sudahPakai').value);

      timerJam = Number.isFinite(timerJam) ? timerJam : 0;
      timerMenit = Number.isFinite(timerMenit) ? timerMenit : 0;
      sudahPakai = Number.isFinite(sudahPakai) ? sudahPakai : 0;

      let totalAwal = (timerJam * 60) + timerMenit;
      let sisa = totalAwal - sudahPakai + currentPunishment;
      if (sisa < 0) sisa = 0;

      let jam = Math.floor(sisa / 60);
      let menit = sisa % 60;

      document.getElementById('result').innerText = `Sisa waktu: ${jam}j ${menit}m`;
      // do NOT auto-add to log here; log only when user clicks "Tambah ke Log"
    }

    // event listeners: inputs update sisa realtime
    ['timerJam','timerMenit','sudahPakai'].forEach(id=>{
      document.getElementById(id).addEventListener('input', calculate);
      // allow numeric only on mobile
      document.getElementById(id).addEventListener('keydown', function(e){
        if(e.key === 'Enter'){
          // prevent Enter from submitting / adding to log ‚Äî just clear inputs
          e.preventDefault();
          this.value = '';
          calculate();
        }
      });
    });

    // tombol tambah ke log
    document.getElementById('addLogBtn').addEventListener('click', function(){
      if(!currentApp) return;
      let timerJam = parseInt(document.getElementById('timerJam').value);
      let timerMenit = parseInt(document.getElementById('timerMenit').value);
      let sudahPakai = parseInt(document.getElementById('sudahPakai').value);
      timerJam = Number.isFinite(timerJam) ? timerJam : 0;
      timerMenit = Number.isFinite(timerMenit) ? timerMenit : 0;
      sudahPakai = Number.isFinite(sudahPakai) ? sudahPakai : 0;

      let totalAwal = (timerJam * 60) + timerMenit;
      let sisa = totalAwal - sudahPakai + currentPunishment;
      if (sisa < 0) sisa = 0;
      let jam = Math.floor(sisa/60);
      let menit = sisa % 60;

      const li = document.createElement('li');
      li.textContent = `${currentApp}: Timer ${timerJam}j ${timerMenit}m - Pakai ${sudahPakai}m - Hukuman ${Math.abs(currentPunishment)}m ‚Üí Sisa ${jam}j ${menit}m`;
      const ul = document.getElementById('logList');
      ul.prepend(li); // paling atas

      // setelah tambah, kosongkan input (tetap tampil sisa di atas)
      document.getElementById('timerJam').value = '';
      document.getElementById('timerMenit').value = '';
      document.getElementById('sudahPakai').value = '';
      calculate(); // hitung ulang
    });

    // tombol reset input
    document.getElementById('resetBtn').addEventListener('click', function(){
      document.getElementById('timerJam').value = '';
      document.getElementById('timerMenit').value = '';
      document.getElementById('sudahPakai').value = '';
      calculate();
    });

    // Accessibility: keyboard shortcuts (optional)
    document.addEventListener('keydown', function(e){
      // ctrl+1 / ctrl+2 / ctrl+3 pilih hukuman cepat (desktop)
      if(e.ctrlKey && !e.altKey && !e.metaKey){
        if(e.key === '1') { pickApp(-25); }
        if(e.key === '2') { pickApp(-15); }
        if(e.key === '3') { pickApp(-10); }
      }
    });

    // initial: nothing selected
    calculate();
  </script>
</body>
</html>